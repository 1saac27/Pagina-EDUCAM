<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adivina la imagen</title>
    <style>
        body {
            background-color: #87CEEB; /* Fondo azul cielo */
            font-family: Arial, sans-serif;
        }

        .container {
            text-align: center;
            margin-top: 50px;
        }

        #imageContainer {
            margin-bottom: 20px;
        }

        #image {
            width: 250px; /* Aumenta el tamaño de la imagen principal */
            height: auto;
        }

        .optionsContainer {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .option {
            margin: 10px;
            cursor: pointer;
            border: 2px solid transparent;
            width: 120px; /* Aumenta el tamaño de las opciones */
            height: 120px; /* Aumenta el tamaño de las opciones */
            object-fit: cover;
        }

        .option.selected {
            border: 2px solid green;
        }

        #resultMessage {
            margin-top: 20px;
            width: 100px;
            height: 100px;
            display: none;
            margin: 20px auto 0;
        }

        #winMessage {
            display: none;
            margin-top: 20px;
            font-weight: bold;
            text-align: center;
        }

        #winMessage img {
            display: block;
            margin: 20px auto;
            width: 50px; /* Ajusta el tamaño de la palomita debajo de las imágenes */
        }

        .fireworks {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            pointer-events: none; /* Permite que los eventos de puntero pasen a través de los fuegos artificiales */
        }

        .firework {
            width: 10px;
            height: 10px;
            background-color: white;
            position: absolute;
            border-radius: 50%;
            animation: firework-animation 1s ease-out forwards;
        }

        @keyframes firework-animation {
            0% {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
            100% {
                opacity: 0;
                transform: scale(2) translateY(-200px);
            }
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/fireworks-js/dist/fireworks.js"></script>
</head>
<body>
    <div class="container">
        <h1>Adivina la imagen</h1>
        <p>Selecciona la imagen correcta de acuerdo a su seña</p>
        <div id="imageContainer">
            <img id="image" src="./images/BOCA.gif" alt="Imagen a adivinar">
        </div>
        <div class="optionsContainer" id="optionsContainer"></div>
        <button onclick="nextImage()">Siguiente</button>
        <img id="resultMessage" src="" alt="Resultado">
        <div id="winMessage">
            <div>Felicidades. Has ganado.</div>
            <img src="./images/Palomita.png" alt="Palomita">
        </div>
        <div class="fireworks" id="fireworks"></div>
    </div>

    <script>
        const images = [
            { src: "./images/BOCA.gif", answer: "Boca.jpg" },
            { src: "./images/BRAZO.gif", answer: "Brazos.png" },
            { src: "./images/CABEZA.gif", answer: "cabeza.png" },
            { src: "./images/CEJA.gif", answer: "ceja.png" },
            { src: "./images/DIENTES.gif", answer: "Dientes.jpg" },
            { src: "./images/ESPALDA.gif", answer: "espalda.png" },
            { src: "./images/NARIZ.gif", answer: "Nariz.jpg" },
            { src: "./images/OJO.gif", answer: "Ojos.png" },
            { src: "./images/OREJA.gif", answer: "Oreja.jpg" },
            { src: "./images/CUELLO.gif", answer: "Cuello.png" }
        ];

        const optionImages = [
            "Boca.jpg", "Brazos.png", "cabeza.png", "ceja.png", "Dientes.jpg",
            "espalda.png", "Nariz.jpg", "Ojos.png", "Oreja.jpg", "Cuello.png"
        ];

        let currentImageIndex = 0;
        let selectedOption = "";
        let isAnswerCorrect = false;

        function loadCurrentImage() {
            const currentImage = images[currentImageIndex];
            document.getElementById("image").src = currentImage.src;
            renderOptions(currentImage.answer);
            document.getElementById("resultMessage").style.display = "none";
        }

        function getRandomOptions(correctAnswer) {
            let options = [correctAnswer];
            while (options.length < 4) {
                const randomOption = optionImages[Math.floor(Math.random() * optionImages.length)];
                if (!options.includes(randomOption)) {
                    options.push(randomOption);
                }
            }
            return options.sort(() => Math.random() - 0.5);
        }

        function renderOptions(correctAnswer) {
            const optionsContainer = document.getElementById("optionsContainer");
            optionsContainer.innerHTML = "";
            const options = getRandomOptions(correctAnswer);
            options.forEach(option => {
                const img = document.createElement("img");
                img.src = `./images/${option}`;
                img.alt = option;
                img.classList.add("option");
                img.onclick = () => selectOption(img, option);
                optionsContainer.appendChild(img);
            });
        }

        function selectOption(img, option) {
            document.querySelectorAll('.option').forEach(opt => opt.classList.remove('selected'));
            img.classList.add('selected');
            selectedOption = option;
            isAnswerCorrect = (selectedOption === images[currentImageIndex].answer);
            showResult();
        }

        function showResult() {
            const resultMessage = document.getElementById("resultMessage");
            if (isAnswerCorrect) {
                resultMessage.src = "./images/Palomita.png";
                resultMessage.style.display = "block";
            } else {
                resultMessage.src = "./images/Tache.png";
                resultMessage.style.display = "block";
            }
        }

        function nextImage() {
            if (!isAnswerCorrect) {
                alert("Selecciona la imagen correcta para seguir");
                return;
            }
            if (currentImageIndex === images.length - 1) {
                showWinMessage();
                return;
            }
            currentImageIndex = (currentImageIndex + 1) % images.length;
            loadCurrentImage();
            selectedOption = "";
            isAnswerCorrect = false;
            document.getElementById("winMessage").style.display = "none";
        }

        function showWinMessage() {
            document.getElementById("winMessage").style.display = "block";
            document.getElementById("resultMessage").style.display = "none";  // Oculta el mensaje de resultado
            const fireworks = document.getElementById("fireworks");
            fireworks.style.display = "flex";  // Muestra los fuegos artificiales
            createFireworks();  // Inicia la animación de fuegos artificiales
            setTimeout(() => {
                fireworks.style.display = "none";  // Oculta los fuegos artificiales después de 6 segundos
            }, 6000);
        }

        function createFireworks() {
            const fireworksContainer = document.getElementById("fireworks");
            fireworksContainer.innerHTML = "";  // Limpiar los fuegos artificiales existentes
            const fireworks = new Fireworks(fireworksContainer, { 
                rocketsPoint: 50, 
                hue: { min: 0, max: 360 }, 
                delay: { min: 15, max: 30 },
                speed: 2,
                acceleration: 1.05,
                friction: 0.95,
                gravity: 1.5,
                particles: 50,
                trace: 3,
                explosion: 5,
                boundaries: {
                    x: 50,
                    y: 50,
                    width: fireworksContainer.clientWidth,
                    height: fireworksContainer.clientHeight
                },
                sound: {
                    enable: true,
                    files: [
                        'https://cdn.jsdelivr.net/gh/crashmax-dev/fireworks-js/sounds/explosion0.mp3',
                        'https://cdn.jsdelivr.net/gh/crashmax-dev/fireworks-js/sounds/explosion1.mp3',
                        'https://cdn.jsdelivr.net/gh/crashmax-dev/fireworks-js/sounds/explosion2.mp3'
                    ],
                    volume: { min: 4, max: 8 }
                }
            });
            fireworks.start();  // Inicia los fuegos artificiales
            setTimeout(() => {
                fireworks.stop();  // Detiene los fuegos artificiales después de 6 segundos
            }, 6000);
        }

        window.onload = loadCurrentImage;
    </script>
</body>
</html>
